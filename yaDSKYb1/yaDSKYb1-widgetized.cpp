// -*- C++ -*-
//
// generated by wxGlade 0.6.8 on Sat Sep 10 08:02:28 2016
//
// Example for compiling a single file project under Linux using g++:
//  g++ MyApp.cpp $(wx-config --libs) $(wx-config --cxxflags) -o MyApp
//
// Example for compiling a multi file project under Linux using g++:
//  g++ main.cpp $(wx-config --libs) $(wx-config --cxxflags) -o MyApp Dialog1.cpp Frame1.cpp
//

#include <wx/stdpaths.h>
#include "yaDSKYb1.h"

// begin wxGlade: ::extracode
// end wxGlade
MyFrame* frame;

BEGIN_EVENT_TABLE(wxImagePanel, wxPanel)
EVT_PAINT(wxImagePanel::paintEvent)
END_EVENT_TABLE()

wxImagePanel::wxImagePanel(wxFrame* parent, wxString file, wxBitmapType format) :
wxPanel(parent)
  {
    // load the file... ideally add a check to see if loading was successful
    image.LoadFile(file, format);
  }

/*
 * Called by the system of by wxWidgets when the panel needs
 * to be redrawn. You can also trigger this call by
 * calling Refresh()/Update().
 */

void
wxImagePanel::paintEvent(wxPaintEvent & evt)
{
  // depending on your system you may need to look at double-buffered dcs
  wxPaintDC dc(this);
  render(dc);
}

/*
 * Alternatively, you can use a clientDC to paint on the panel
 * at any time. Using this generally does not free you from
 * catching paint events, since it is possible that e.g. the window
 * manager throws away your drawing when the window comes to the
 * background, and expects you will redraw it when the window comes
 * back (by sending a paint event).
 */
void
wxImagePanel::paintNow()
{
  // depending on your system you may need to look at double-buffered dcs
  wxClientDC dc(this);
  render(dc);
}

/*
 * Here we do the actual rendering. I put it in a separate
 * method so that it can work no matter what type of DC
 * (e.g. wxPaintDC or wxClientDC) is used.
 */
void
wxImagePanel::render(wxDC& dc)
{
  dc.DrawBitmap(image, 0, 0, false);
}

// This is a function that stands in place of the function
// wxBitmap(filename, imagetype) to load an a jpg but to scale it according
// to scaleDPI.
wxBitmap
scaledBitmap(const wxString &name, wxBitmapType type) {
  wxImage *image = new wxImage(name, type);
  image->Rescale(SCALED2(image->GetWidth()), SCALED2(image->GetHeight()));
  return wxBitmap(*image);
}

MyFrame::MyFrame(wxWindow* parent, int id, const wxString& title,
    const wxString& images, bool inNavBay, const wxPoint& pos,
    const wxSize& size, long style) :
    wxFrame(parent, id, title, pos, size, wxDEFAULT_FRAME_STYLE)
{
  // begin wxGlade: MyFrame::MyFrame

  imageDirectory = images;
  navBay = inNavBay;

  panel = new wxImagePanel(this,
      imageDirectory
          + (navBay ?
              wxT("Block1DSKYnav-face-bare.png") :
              wxT("Block1DSKYmain-face-bare.png")), wxBITMAP_TYPE_PNG);
  wxImage image = panel->image.ConvertToImage();
  image.Rescale(SCALED2(image.GetWidth()), SCALED2(image.GetHeight()));
  panel->image = wxBitmap(image);
  //panel->SetMinSize(wxSize(image.GetWidth(), image.GetHeight()));

  UpTelAccept = false;
  flashing = false;
  flashStateLit = true;
  flashCounter = 0;

  imageUpTelBlock = scaledBitmap(imageDirectory + wxT("UpTel-block-20x40.png"),
      wxBITMAP_TYPE_ANY);
  imageUpTelAccept = scaledBitmap(imageDirectory + wxT("UpTel-accept-20x40.png"),
      wxBITMAP_TYPE_ANY);

  image7Seg0 = scaledBitmap(imageDirectory + wxT("7Seg-0-33x38.jpg"),
      wxBITMAP_TYPE_ANY);
  image7Seg15 = scaledBitmap(imageDirectory + wxT("7Seg-15-33x38.jpg"),
      wxBITMAP_TYPE_ANY);
  image7Seg19 = scaledBitmap(imageDirectory + wxT("7Seg-19-33x38.jpg"),
      wxBITMAP_TYPE_ANY);
  image7Seg21 = scaledBitmap(imageDirectory + wxT("7Seg-21-33x38.jpg"),
      wxBITMAP_TYPE_ANY);
  image7Seg25 = scaledBitmap(imageDirectory + wxT("7Seg-25-33x38.jpg"),
      wxBITMAP_TYPE_ANY);
  image7Seg27 = scaledBitmap(imageDirectory + wxT("7Seg-27-33x38.jpg"),
      wxBITMAP_TYPE_ANY);
  image7Seg28 = scaledBitmap(imageDirectory + wxT("7Seg-28-33x38.jpg"),
      wxBITMAP_TYPE_ANY);
  image7Seg29 = scaledBitmap(imageDirectory + wxT("7Seg-29-33x38.jpg"),
      wxBITMAP_TYPE_ANY);
  image7Seg30 = scaledBitmap(imageDirectory + wxT("7Seg-30-33x38.jpg"),
      wxBITMAP_TYPE_ANY);
  image7Seg31 = scaledBitmap(imageDirectory + wxT("7Seg-31-33x38.jpg"),
      wxBITMAP_TYPE_ANY);
  image7Seg3 = scaledBitmap(imageDirectory + wxT("7Seg-3-33x38.jpg"),
      wxBITMAP_TYPE_ANY);
  imagePlusMinusPlus = scaledBitmap(
      imageDirectory + wxT("PlusMinus-plus-28x38.jpg"), wxBITMAP_TYPE_ANY);
  imagePlusMinusMinus = scaledBitmap(
      imageDirectory + wxT("PlusMinus-minus-28x38.jpg"), wxBITMAP_TYPE_ANY);
  imagePlusMinusOff = scaledBitmap(imageDirectory + wxT("PlusMinus-off-28x38.jpg"),
      wxBITMAP_TYPE_ANY);

  imageUptlOn = scaledBitmap(imageDirectory + wxT("Uptl-on-43x37.png"),
      wxBITMAP_TYPE_ANY);
  imageUptlOff = scaledBitmap(imageDirectory + wxT("Uptl-off-43x37.png"),
      wxBITMAP_TYPE_ANY);

  imageCompOn = scaledBitmap(imageDirectory + wxT("Comp-on-43x37.png"),
      wxBITMAP_TYPE_ANY);
  imageCompOff = scaledBitmap(imageDirectory + wxT("Comp-off-43x37.png"),
      wxBITMAP_TYPE_ANY);
  imageVerbLabelOn = scaledBitmap(imageDirectory + (navBay ?
      wxT("VerbLabel-nav-on-85x21.png") :
      wxT("VerbLabel-on-85x21.png")),
      wxBITMAP_TYPE_ANY);
  imageVerbLabelOff = scaledBitmap(
      imageDirectory
          + (navBay ?
              wxT("VerbLabel-nav-off-85x21.png") :
              wxT("VerbLabel-off-85x21.png")), wxBITMAP_TYPE_ANY);
  imageNounLabelOn =
      scaledBitmap(
          imageDirectory
              + (navBay ?
                  wxT("NounLabel-nav-on-93x21.png") :
                  wxT("NounLabel-on-93x21.png")), wxBITMAP_TYPE_ANY);
  imageNounLabelOff = scaledBitmap(imageDirectory + (navBay ?
      wxT("NounLabel-nav-off-93x21.png") :
      wxT("NounLabel-off-93x21.png")),
      wxBITMAP_TYPE_ANY);

  imageCompFailOn = scaledBitmap(imageDirectory + wxT("CompFail-on-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageCompFailOff = scaledBitmap(imageDirectory + wxT("CompFail-off-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageCheckFailOn = scaledBitmap(imageDirectory + wxT("CheckFail-on-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageCheckFailOff = scaledBitmap(imageDirectory + wxT("CheckFail-off-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageProgAlmOn = scaledBitmap(imageDirectory + wxT("ProgAlm-on-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageProgAlmOff = scaledBitmap(imageDirectory + wxT("ProgAlm-off-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageCounterFailOn = scaledBitmap(
      imageDirectory + wxT("CounterFail-on-63x44.png"), wxBITMAP_TYPE_ANY);
  imageCounterFailOff = scaledBitmap(
      imageDirectory + wxT("CounterFail-off-63x44.png"), wxBITMAP_TYPE_ANY);
  imageRuptLockOn = scaledBitmap(imageDirectory + wxT("RuptLock-on-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageRuptLockOff = scaledBitmap(imageDirectory + wxT("RuptLock-off-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageTcTrapOn = scaledBitmap(imageDirectory + wxT("TcTrap-on-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageTcTrapOff = scaledBitmap(imageDirectory + wxT("TcTrap-off-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageScalerFailOn = scaledBitmap(imageDirectory + wxT("ScalerFail-on-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageScalerFailOff = scaledBitmap(
      imageDirectory + wxT("ScalerFail-off-63x44.png"), wxBITMAP_TYPE_ANY);
  imageTmFailOn = scaledBitmap(imageDirectory + wxT("TmFail-on-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageTmFailOff = scaledBitmap(imageDirectory + wxT("TmFail-off-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageKeyRlseOn = scaledBitmap(imageDirectory + wxT("KeyRlse-on-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageKeyRlseOff = scaledBitmap(imageDirectory + wxT("KeyRlse-off-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageBlankOn = scaledBitmap(imageDirectory + wxT("Blank-on-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageBlankOff = scaledBitmap(imageDirectory + wxT("Blank-off-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageParityFailOn = scaledBitmap(imageDirectory + wxT("ParityFail-on-63x44.png"),
      wxBITMAP_TYPE_ANY);
  imageParityFailOff = scaledBitmap(
      imageDirectory + wxT("ParityFail-off-63x44.png"), wxBITMAP_TYPE_ANY);

  indicatorCompFail = new wxStaticBitmap(panel, wxID_ANY, imageCompFailOff);
  indicatorCheckFail = new wxStaticBitmap(panel, wxID_ANY, imageCheckFailOff);
  indicatorProgAlm = new wxStaticBitmap(panel, wxID_ANY, imageProgAlmOff);
  indicatorCounterFail = new wxStaticBitmap(panel, wxID_ANY,
      imageCounterFailOff);
  indicatorRuptLock = new wxStaticBitmap(panel, wxID_ANY, imageRuptLockOff);
  indicatorTcTrap = new wxStaticBitmap(panel, wxID_ANY, imageTcTrapOff);
  indicatorScalerFail = new wxStaticBitmap(panel, wxID_ANY, imageScalerFailOff);
  indicatorTmFail = new wxStaticBitmap(panel, wxID_ANY, imageTmFailOff);
  indicatorParityFail = new wxStaticBitmap(panel, wxID_ANY, imageParityFailOff);
  indicatorKeyRlse = new wxStaticBitmap(panel, wxID_ANY, imageKeyRlseOff);
  indicatorTopMiddle = new wxStaticBitmap(panel, wxID_ANY, imageBlankOff);
  indicatorBottomLeft = new wxStaticBitmap(panel, wxID_ANY, imageBlankOff);
  indicatorBottomRight = new wxStaticBitmap(panel, wxID_ANY, imageBlankOff);

  indicatorUpTl = new wxStaticBitmap(panel, wxID_ANY, imageUptlOff);
  indicatorComp = new wxStaticBitmap(panel, wxID_ANY, imageCompOff);
  //labelNoun = new wxStaticBitmap(panel, wxID_ANY, imageNounLabelOn);
  //labelVerb = new wxStaticBitmap(panel, wxID_ANY, imageVerbLabelOn);
  digitProgramLeft = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  digitProgramRight = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  digitVerbLeft = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  digitVerbRight = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  digitNounLeft = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  digitNounRight = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  PlusMinusReg1 = new wxStaticBitmap(panel, wxID_ANY, imagePlusMinusOff);
  Digit1Reg1 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  Digit2Reg1 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  Digit3Reg1 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  Digit4Reg1 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  Digit5Reg1 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  PlusMinusReg2 = new wxStaticBitmap(panel, wxID_ANY, imagePlusMinusOff);
  Digit1Reg2 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  Digit2Reg2 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  Digit3Reg2 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  Digit4Reg2 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  Digit5Reg2 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  PlusMinusReg3 = new wxStaticBitmap(panel, wxID_ANY, imagePlusMinusOff);
  Digit1Reg3 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  Digit2Reg3 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  Digit3Reg3 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  Digit4Reg3 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  Digit5Reg3 = new wxStaticBitmap(panel, wxID_ANY, image7Seg0);
  SwitchUpTel = new wxBitmapButton(panel, ID_UPTELSWITCH, imageUpTelBlock,
                    wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  ButtonKeyRlse = new wxBitmapButton(panel, ID_KEYRLSEBUTTON,
      scaledBitmap(imageDirectory + wxT("KeyRlse-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  ButtonErrorReset = new wxBitmapButton(panel, ID_KEYRLSEBUTTON,
      scaledBitmap(imageDirectory + wxT("ErrorReset-60x60.png"),
          wxBITMAP_TYPE_ANY),
	      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  ButtonTestAlarm = new wxBitmapButton(panel, ID_TESTALARMBUTTON,
      scaledBitmap(imageDirectory + wxT("TestAlarm-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  ButtonClear = new wxBitmapButton(panel, ID_CLEARBUTTON,
      scaledBitmap(imageDirectory + wxT("Clear-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  ButtonVerb = new wxBitmapButton(panel, ID_VERBBUTTON,
      scaledBitmap(imageDirectory + wxT("Verb-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  ButtonNoun = new wxBitmapButton(panel, ID_NOUNBUTTON,
      scaledBitmap(imageDirectory + wxT("Noun-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  ButtonEnter = new wxBitmapButton(panel, ID_ENTERBUTTON,
      scaledBitmap(imageDirectory + wxT("Enter-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  ButtonPlus = new wxBitmapButton(panel, ID_PLUSBUTTON,
      scaledBitmap(imageDirectory + wxT("Plus-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  Button7 = new wxBitmapButton(panel, ID_SEVENBUTTON,
      scaledBitmap(imageDirectory + wxT("7-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  Button8 = new wxBitmapButton(panel, ID_EIGHTBUTTON,
      scaledBitmap(imageDirectory + wxT("8-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  Button9 = new wxBitmapButton(panel, ID_NINEBUTTON,
      scaledBitmap(imageDirectory + wxT("9-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  ButtonMinus = new wxBitmapButton(panel, ID_MINUSBUTTON,
      scaledBitmap(imageDirectory + wxT("Minus-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  Button4 = new wxBitmapButton(panel, ID_FOURBUTTON,
      scaledBitmap(imageDirectory + wxT("4-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  Button5 = new wxBitmapButton(panel, ID_FIVEBUTTON,
      scaledBitmap(imageDirectory + wxT("5-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  Button6 = new wxBitmapButton(panel, ID_SIXBUTTON,
      scaledBitmap(imageDirectory + wxT("6-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  Button0 = new wxBitmapButton(panel, ID_ZEROBUTTON,
      scaledBitmap(imageDirectory + wxT("0-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  Button1 = new wxBitmapButton(panel, ID_ONEBUTTON,
      scaledBitmap(imageDirectory + wxT("1-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  Button2 = new wxBitmapButton(panel, ID_TWOBUTTON,
      scaledBitmap(imageDirectory + wxT("2-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);
  Button3 = new wxBitmapButton(panel, ID_THREEBUTTON,
      scaledBitmap(imageDirectory + wxT("3-60x60.png"), wxBITMAP_TYPE_ANY),
      wxDefaultPosition, wxDefaultSize, wxNO_BORDER | wxBU_EXACTFIT);

  set_properties();
  do_layout();
  // end wxGlade
}

void
MyFrame::set_properties()
{

  // begin wxGlade: MyFrame::set_properties
  SetTitle(
      navBay ? _("DSKY") : _("DSKY"));
  SetBackgroundColour(wxColour(214, 214, 214));
  SwitchUpTel->SetSize(wxSize(SCALED2(20), SCALED2(40)));
  wxSize buttonSize = wxSize(SCALED2(60), SCALED2(60));
  ButtonKeyRlse->SetSize(buttonSize);
  ButtonTestAlarm->SetSize(buttonSize);
  ButtonErrorReset->SetSize(buttonSize);
  ButtonClear->SetSize(buttonSize);
  ButtonVerb->SetSize(buttonSize);
  ButtonNoun->SetSize(buttonSize);
  ButtonEnter->SetSize(buttonSize);
  ButtonPlus->SetSize(buttonSize);
  Button7->SetSize(buttonSize);
  Button8->SetSize(buttonSize);
  Button9->SetSize(buttonSize);
  ButtonMinus->SetSize(buttonSize);
  Button4->SetSize(buttonSize);
  Button5->SetSize(buttonSize);
  Button6->SetSize(buttonSize);
  Button0->SetSize(buttonSize);
  Button1->SetSize(buttonSize);
  Button2->SetSize(buttonSize);
  Button3->SetSize(buttonSize);
  ButtonKeyRlse->SetMinSize(buttonSize);
  ButtonTestAlarm->SetMinSize(buttonSize);
  ButtonErrorReset->SetMinSize(buttonSize);
  ButtonClear->SetMinSize(buttonSize);
  ButtonVerb->SetMinSize(buttonSize);
  ButtonNoun->SetMinSize(buttonSize);
  ButtonEnter->SetMinSize(buttonSize);
  ButtonPlus->SetMinSize(buttonSize);
  Button7->SetMinSize(buttonSize);
  Button8->SetMinSize(buttonSize);
  Button9->SetMinSize(buttonSize);
  ButtonMinus->SetMinSize(buttonSize);
  Button4->SetMinSize(buttonSize);
  Button5->SetMinSize(buttonSize);
  Button6->SetMinSize(buttonSize);
  Button0->SetMinSize(buttonSize);
  Button1->SetMinSize(buttonSize);
  Button2->SetMinSize(buttonSize);
  Button3->SetMinSize(buttonSize);
  panel->SetBackgroundColour(wxColour(0, 0, 0));

// end wxGlade
}

wxPoint
scaledPoint(double x, double y) {
  return wxPoint(SCALED2(x), SCALED2(y));
}

void
MyFrame::do_layout()
{
  // For the main control panel, which was the first version I did, I used the
  // stereotypical wxWidgets layout strategy, with sizer and what-not all over
  // the place.  It was extraordinarily complex to get that right, given that
  // I didn't actually want anything to be resizable.  (It doesn't *look* all that
  // complex in the code, but there was endless pixel-by-pixel adjustment and
  // readjustment to get it right.)  With the nav-bay DSKY, I've gotten a little
  // smarter.  All the controls are simply positioned at absolute locations atop
  // the background image at positions I just read off from the GIMP.
  if (navBay)
    {
      double x, y, xStart, yStart, xDelta, yDelta;

      indicatorCompFail->Show(false);
      SwitchUpTel->Show(false);
      SetSize(wxSize(SCALED2(346), SCALED2(1151)));

      xDelta = SCALED2(73);
      yDelta = SCALED2(48);
      xStart = SCALED2(69);
      yStart = SCALED2(81);
      y = yStart;
      x = xStart;
      indicatorProgAlm->SetPosition(wxPoint(x, y));
      x += xDelta;
      indicatorTopMiddle->SetPosition(wxPoint(x, y));
      x += xDelta;
      indicatorCounterFail->SetPosition(wxPoint(x, y));
      y += yDelta;
      x = xStart;
      indicatorRuptLock->SetPosition(wxPoint(x, y));
      x += xDelta;
      indicatorTcTrap->SetPosition(wxPoint(x, y));
      x += xDelta;
      indicatorScalerFail->SetPosition(wxPoint(x, y));
      y += yDelta;
      x = xStart;
      indicatorParityFail->SetPosition(wxPoint(x, y));
      x += xDelta;
      indicatorTmFail->SetPosition(wxPoint(x, y));
      x += xDelta;
      indicatorCheckFail->SetPosition(wxPoint(x, y));
      y += yDelta;
      x = xStart;
      indicatorBottomLeft->SetPosition(wxPoint(x, y));
      x += xDelta;
      indicatorKeyRlse->SetPosition(wxPoint(x, y));
      x += xDelta;
      indicatorBottomRight->SetPosition(wxPoint(x, y));
      xDelta = SCALED2(44);
      yDelta = SCALED2(0);
      xStart = SCALED2(72);
      yStart = SCALED2(346);
      y = yStart;
      x = xStart;
      indicatorUpTl->SetPosition(wxPoint(x, y));
      x += xDelta;
      indicatorComp->SetPosition(wxPoint(x, y));
      x += xDelta;
      xDelta = SCALED2(38);
      yDelta = SCALED2(0);
      xStart = SCALED2(197);
      y = yStart;
      x = xStart;
      digitProgramLeft->SetPosition(wxPoint(x, y));
      x += xDelta;
      digitProgramRight->SetPosition(wxPoint(x, y));
      x += xDelta;
      xDelta = SCALED2(38);
      yDelta = SCALED2(0);
      xStart = SCALED2(78);
      yStart = SCALED2(406);
      y = yStart;
      x = xStart;
      digitVerbLeft->SetPosition(wxPoint(x, y));
      x += xDelta;
      digitVerbRight->SetPosition(wxPoint(x, y));
      x += xDelta;
      xDelta = SCALED2(38);
      yDelta = SCALED2(0);
      xStart = SCALED2(197);
      yStart = SCALED2(406);
      y = yStart;
      x = xStart;
      digitNounLeft->SetPosition(wxPoint(x, y));
      x += xDelta;
      digitNounRight->SetPosition(wxPoint(x, y));
      x += xDelta;
      xDelta = SCALED2(33);
      yDelta = SCALED2(60);
      xStart = SCALED2(74);
      yStart = SCALED2(466);
      y = yStart;
      x = xStart;
      PlusMinusReg1->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit1Reg1->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit2Reg1->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit3Reg1->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit4Reg1->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit5Reg1->SetPosition(wxPoint(x, y));
      x += xDelta;
      y += yDelta;
      x = xStart;
      PlusMinusReg2->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit1Reg2->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit2Reg2->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit3Reg2->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit4Reg2->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit5Reg2->SetPosition(wxPoint(x, y));
      x += xDelta;
      y += yDelta;
      x = xStart;
      PlusMinusReg3->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit1Reg3->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit2Reg3->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit3Reg3->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit4Reg3->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit5Reg3->SetPosition(wxPoint(x, y));
      x += xDelta;
      xDelta = SCALED2(92);
      yDelta = SCALED2(0);
      xStart = SCALED2(51);
      yStart = SCALED2(823);
      y = yStart;
      x = xStart;
      ButtonKeyRlse->SetPosition(wxPoint(x, y));
      x += xDelta;
      ButtonTestAlarm->SetPosition(wxPoint(x, y));
      x += xDelta;
      ButtonErrorReset->SetPosition(wxPoint(x, y));
      x += xDelta;
      xDelta = SCALED2(61);
      yDelta = SCALED2(61);
      xStart = SCALED2(51);
      yStart = SCALED2(890);
      y = yStart;
      x = xStart;
      ButtonClear->SetPosition(wxPoint(x, y));
      x += xDelta;
      ButtonVerb->SetPosition(wxPoint(x, y));
      x += xDelta;
      ButtonNoun->SetPosition(wxPoint(x, y));
      x += xDelta;
      ButtonEnter->SetPosition(wxPoint(x, y));
      x += xDelta;
      y += yDelta;
      x = xStart;
      ButtonPlus->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button7->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button8->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button9->SetPosition(wxPoint(x, y));
      x += xDelta;
      y += yDelta;
      x = xStart;
      ButtonMinus->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button4->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button5->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button6->SetPosition(wxPoint(x, y));
      x += xDelta;
      y += yDelta;
      x = xStart;
      Button0->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button1->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button2->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button3->SetPosition(wxPoint(x, y));
      x += xDelta;

      //labelVerb->SetPosition(wxPoint(71, 385));
      //labelNoun->SetPosition(wxPoint(188, 385));
    }
  else
    {
      // These are nav-bay widgets which aren't visible on the control-panel DSKY.
      ButtonTestAlarm->Show(false);
      indicatorProgAlm->Show(false);
      indicatorCounterFail->Show(false);
      indicatorRuptLock->Show(false);
      indicatorTcTrap->Show(false);
      indicatorScalerFail->Show(false);
      indicatorTmFail->Show(false);
      indicatorParityFail->Show(false);
      indicatorKeyRlse->Show(false);
      indicatorTopMiddle->Show(false);
      indicatorBottomLeft->Show(false);
      indicatorBottomRight->Show(false);

#ifdef USE_SIZERS
      // begin wxGlade: MyFrame::do_layout
      wxBoxSizer* sizer_1 = new wxBoxSizer(wxVERTICAL);
      wxBoxSizer* BothSides = new wxBoxSizer(wxHORIZONTAL);
      wxBoxSizer* RightSide = new wxBoxSizer(wxVERTICAL);
      wxGridSizer* LowerKeypad = new wxGridSizer(4, 4, SCALED2(2), SCALED2(2)); // Keypad
      wxBoxSizer* UpperKeypad = new wxBoxSizer(wxHORIZONTAL);
      wxBoxSizer* ExternalControls = new wxBoxSizer(wxHORIZONTAL);
      wxBoxSizer* LeftSide = new wxBoxSizer(wxVERTICAL);
      //wxBoxSizer* sizer_7 = new wxBoxSizer(wxHORIZONTAL);
      wxGridSizer* Registers = new wxGridSizer(3, 6, SCALED2(22), SCALED2(1)); // Registers.
      wxFlexGridSizer* AboveRegisters = new wxFlexGridSizer(3 /*2*/, 2, SCALED2(0) /*21*/,
    		  SCALED2(22)); // Activity/Program/Verb/Noun
      wxBoxSizer* NounDigits = new wxBoxSizer(wxHORIZONTAL);
      wxBoxSizer* VerbDigits = new wxBoxSizer(wxHORIZONTAL);
      wxBoxSizer* ProgramDigits = new wxBoxSizer(wxHORIZONTAL);
      wxBoxSizer* UpTlIndicator = new wxBoxSizer(wxHORIZONTAL);
      wxBoxSizer* CompAndCheckIndicators = new wxBoxSizer(wxHORIZONTAL);
      BothSides->Add(SCALED2(77), SCALED2(20), 0, 0, 0); // Left margin
      LeftSide->Add(SCALED2(20), SCALED2(55), 0, 0, 0);
      CompAndCheckIndicators->Add(SCALED2(39), SCALED2(20), 0, 0, 0); // Left of CompFail.
      CompAndCheckIndicators->Add(indicatorCompFail, 0, 0, 0);
      CompAndCheckIndicators->Add(SCALED2(5), SCALED2(20), 0, 0, 0); // Between CompFail and CheckFail
      CompAndCheckIndicators->Add(indicatorCheckFail, 0, 0, 0);
      CompAndCheckIndicators->Add(SCALED2(39), SCALED2(20), 0, 0, 0); // Right of CheckFail
      LeftSide->Add(CompAndCheckIndicators, 0, 0, 0);
      LeftSide->Add(SCALED2(20), SCALED2(113), 0, 0, 0);
      UpTlIndicator->Add(SCALED2(0), SCALED2(20), 0, 0, 0);
      UpTlIndicator->Add(indicatorUpTl, 0, 0, 0);
      UpTlIndicator->Add(SCALED2(1), SCALED2(20), 0, 0, 0);
      UpTlIndicator->Add(indicatorComp, 0, 0, 0);
      UpTlIndicator->Add(SCALED2(5), SCALED2(20), 0, 0, 0);
      AboveRegisters->Add(UpTlIndicator, 0, 0, 0);
      ProgramDigits->Add(SCALED2(11), SCALED2(20), 0, 0, 0);
      ProgramDigits->Add(digitProgramLeft, 0, 0, 0);
      ProgramDigits->Add(SCALED2(5), SCALED2(20), 0, 0, 0);
      ProgramDigits->Add(digitProgramRight, 0, 0, 0);
      ProgramDigits->Add(SCALED2(12), SCALED2(20), 0, 0, 0);
      AboveRegisters->Add(ProgramDigits, 0, 0, 0);
      //AboveRegisters->Add(20, 21, 0);
      //AboveRegisters->Add(20, 21, 0);
      AboveRegisters->Add(SCALED2(85), SCALED2(21), 0, 0, 0);
      AboveRegisters->Add(SCALED2(93), SCALED2(21), 0, 0, 0);
      VerbDigits->Add(SCALED2(7), SCALED2(20), 0, 0, 0);
      VerbDigits->Add(digitVerbLeft, 0, 0, 0);
      VerbDigits->Add(SCALED2(5), SCALED2(20), 0, 0, 0);
      VerbDigits->Add(digitVerbRight, 0, 0, 0);
      VerbDigits->Add(SCALED2(12), SCALED2(20), 0, 0, 0);
      AboveRegisters->Add(VerbDigits, 0, 0, 0);
      NounDigits->Add(SCALED2(11), SCALED2(20), 0, 0, 0);
      NounDigits->Add(digitNounLeft, 0, 0, 0);
      NounDigits->Add(SCALED2(5), SCALED2(20), 0, 0, 0);
      NounDigits->Add(digitNounRight, 0, 0, 0);
      NounDigits->Add(SCALED2(12), SCALED2(20), 0, 0, 0);
      AboveRegisters->Add(NounDigits, 0, 0, 0);
      LeftSide->Add(AboveRegisters, 0, wxALIGN_CENTER_HORIZONTAL, 0);
      LeftSide->Add(SCALED2(20), SCALED2(22), 0, 0, 0); // Between Reg1 and Verb/Noun
      Registers->Add(PlusMinusReg1, 0, 0, 0);
      Registers->Add(Digit1Reg1, 0, 0, 0);
      Registers->Add(Digit2Reg1, 0, 0, 0);
      Registers->Add(Digit3Reg1, 0, 0, 0);
      Registers->Add(Digit4Reg1, 0, 0, 0);
      Registers->Add(Digit5Reg1, 0, 0, 0);
      Registers->Add(PlusMinusReg2, 0, 0, 0);
      Registers->Add(Digit1Reg2, 0, 0, 0);
      Registers->Add(Digit2Reg2, 0, 0, 0);
      Registers->Add(Digit3Reg2, 0, 0, 0);
      Registers->Add(Digit4Reg2, 0, 0, 0);
      Registers->Add(Digit5Reg2, 0, 0, 0);
      Registers->Add(PlusMinusReg3, 0, 0, 0);
      Registers->Add(Digit1Reg3, 0, 0, 0);
      Registers->Add(Digit2Reg3, 0, 0, 0);
      Registers->Add(Digit3Reg3, 0, 0, 0);
      Registers->Add(Digit4Reg3, 0, 0, 0);
      Registers->Add(Digit5Reg3, 0, 0, 0);
      //sizer_7->Add(Registers, 0, 0, 0);
      //LeftSide->Add(sizer_7, 0, 0, 0);
      LeftSide->Add(Registers);
      LeftSide->Add(SCALED2(20), SCALED2(74), 0, 0, 0); // Below Reg3.
      BothSides->Add(LeftSide, 0, 0, 0);
      BothSides->Add(SCALED2(31), SCALED2(20), 0, 0, 0); // Middle horizontal spacer.
      RightSide->Add(SCALED2(20), SCALED2(46), 0, 0, 0); // Above SwitchUptel
      ExternalControls->Add(SCALED2(15), SCALED2(20), 0, 0, 0); // Left of SwitchUptel
      ExternalControls->Add(SwitchUpTel, 0, 0, 0);
      ExternalControls->Add(SCALED2(184), SCALED2(20), 0, 0, 0); // Right of SwitchUpTel
      RightSide->Add(ExternalControls, 0, 0, 0);
      RightSide->Add(SCALED2(20), SCALED2(106), 0, 0, 0); // Between KeyRlse and SwitchUpTel
      UpperKeypad->Add(ButtonKeyRlse, 0, 0, 0);
      UpperKeypad->Add(SCALED2(126), SCALED2(20), 0, 0, 0); // Between KeyRlse and ErrorReset
      UpperKeypad->Add(ButtonErrorReset, 0, 0, 0);
      RightSide->Add(UpperKeypad, 0, 0, 0);
      RightSide->Add(SCALED2(20), SCALED2(6), 0, 0, 0); // Between KeyRlse and Keypad
      LowerKeypad->Add(ButtonClear, 0, 0, 0);
      LowerKeypad->Add(ButtonVerb, 0, 0, 0);
      LowerKeypad->Add(ButtonNoun, 0, 0, 0);
      LowerKeypad->Add(ButtonEnter, 0, 0, 0);
      LowerKeypad->Add(ButtonPlus, 0, 0, 0);
      LowerKeypad->Add(Button7, 0, 0, 0);
      LowerKeypad->Add(Button8, 0, 0, 0);
      LowerKeypad->Add(Button9, 0, 0, 0);
      LowerKeypad->Add(ButtonMinus, 0, 0, 0);
      LowerKeypad->Add(Button4, 0, 0, 0);
      LowerKeypad->Add(Button5, 0, 0, 0);
      LowerKeypad->Add(Button6, 0, 0, 0);
      LowerKeypad->Add(Button0, 0, 0, 0);
      LowerKeypad->Add(Button1, 0, 0, 0);
      LowerKeypad->Add(Button2, 0, 0, 0);
      LowerKeypad->Add(Button3, 0, 0, 0);
      RightSide->Add(LowerKeypad, 0, 0, 0);
      RightSide->Add(SCALED2(20), SCALED2(63), 0, 0, 0); // Below keypad
      BothSides->Add(RightSide, 0, 0, 0);
      BothSides->Add(SCALED2(26), SCALED2(20), 0, 0, 0);
      panel->SetSizer(BothSides);
      sizer_1->Add(panel, 1, 0, 0);
      SetSizer(sizer_1);
      sizer_1->Fit(this);
      Layout();
      // end wxGlade
#else // ifndef USE_SIZERS
      // For reasons inexplicable to me, the normal wxWidgets method of using
      // sizers introduces small positioning discrepancies (in --half-size only)
      // and those discrepancies are different on different target platforms.
      // Those discrepancies, while small, are serious and seem to be far
      // larger than the rounding errors introduced by stacking SCALED2()
      // errors.  I'm tired of wrestling with that nonsensical problem. However,
      // the positioning method (without sizers) used for NAV seems to
      // work perfectly.  Here, I mimic what NAV does.

      // A word about technique.  I made it a little easier than described above
      // partial automation:
      // A. In GIMP, make an image consisting of layers:  the background
      //    (full face), and each widget.  For those widgets that are
      //    indistinguishable digits, rename their layers more descriptively.
      // B. Make it RGB and use a DPI of 100.
      // C. Export as a TIFF file.
      // D. Use the utility `tiffinfo` to read the TIFF file and thus print
      //    info about each layer.  `egrep` it with "Position:|PageName:" to
      //    show just the relevant layers.  Since the DPI is 100, a position
      //    of something like 1.16,.55 is seen at a glance to be 116,55 pixels.
      // For future reference (even though I'll undoubtedly never read this
      // again!), the process could have been fully automated:  Simply name
      // each tiff layer identically to the associated widget name
      // Then have a script process the info provided by
      // `tiffinfo` to produce a sequence of lines of the form
      //      widget->SetPosition(scaledPoint(x, y));
      // which could be directly pasted into a ::do_layout() function like this
      // one.

      double x, y, xStart, yStart, xDelta, yDelta, xDelta1;

      // Left-hand side.
      indicatorCompFail->SetPosition(scaledPoint(115, 55));
      indicatorCheckFail->SetPosition(scaledPoint(182, 55));
      indicatorUpTl->SetPosition(scaledPoint(77, 212));
      indicatorComp->SetPosition(scaledPoint(121, 212));
      digitProgramLeft->SetPosition(scaledPoint(202, 212));
      digitProgramRight->SetPosition(scaledPoint(242, 212));
      digitVerbLeft->SetPosition(scaledPoint(83, 271));
      digitVerbRight->SetPosition(scaledPoint(122, 271));
      digitNounLeft->SetPosition(scaledPoint(202, 271));
      digitNounRight->SetPosition(scaledPoint(242, 271));
      yStart = SCALED2(331);
      yDelta = SCALED2(60);
      xStart = SCALED2(76);
      xDelta1 = SCALED2(36);
      xDelta = SCALED2(34);
      x = xStart;
      y = yStart;
      PlusMinusReg1->SetPosition(wxPoint(x, y));
      x += xDelta1;
      Digit1Reg1->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit2Reg1->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit3Reg1->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit4Reg1->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit5Reg1->SetPosition(wxPoint(x, y));
      y += yDelta;
      x = xStart;
      PlusMinusReg2->SetPosition(wxPoint(x, y));
      x += xDelta1;
      Digit1Reg2->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit2Reg2->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit3Reg2->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit4Reg2->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit5Reg2->SetPosition(wxPoint(x, y));
      y += yDelta;
      x = xStart;
      PlusMinusReg3->SetPosition(wxPoint(x, y));
      x += xDelta1;
      Digit1Reg3->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit2Reg3->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit3Reg3->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit4Reg3->SetPosition(wxPoint(x, y));
      x += xDelta;
      Digit5Reg3->SetPosition(wxPoint(x, y));
      // Right-hand side.
      SwitchUpTel->SetPosition(scaledPoint(337, 53));
      ButtonKeyRlse->SetPosition(scaledPoint(317, 199));
      ButtonErrorReset->SetPosition(scaledPoint(503, 199));
      xDelta = SCALED2(62);
      yDelta = SCALED2(62);
      xStart = SCALED2(317);
      yStart = SCALED2(265);
      y = yStart;
      x = xStart;
      ButtonClear->SetPosition(wxPoint(x, y));
      x += xDelta;
      ButtonVerb->SetPosition(wxPoint(x, y));
      x += xDelta;
      ButtonNoun->SetPosition(wxPoint(x, y));
      x += xDelta;
      ButtonEnter->SetPosition(wxPoint(x, y));
      x += xDelta;
      y += yDelta;
      x = xStart;
      ButtonPlus->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button7->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button8->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button9->SetPosition(wxPoint(x, y));
      x += xDelta;
      y += yDelta;
      x = xStart;
      ButtonMinus->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button4->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button5->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button6->SetPosition(wxPoint(x, y));
      x += xDelta;
      y += yDelta;
      x = xStart;
      Button0->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button1->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button2->SetPosition(wxPoint(x, y));
      x += xDelta;
      Button3->SetPosition(wxPoint(x, y));
#endif
    }
}

class MyApp : public wxApp
{
public:
  bool
  OnInit();
protected:
  wxLocale m_locale;  // locale we'll be using
};

IMPLEMENT_APP (MyApp)

bool
MyApp::OnInit()
{
  wxString imageDirectory = wxT("images/");
  bool navBay = false;

  m_locale.Init();
#ifdef APP_LOCALE_DIR
  m_locale.AddCatalogLookupPathPrefix(wxT(APP_LOCALE_DIR));
#endif
  m_locale.AddCatalog(wxT(APP_CATALOG));

  for (int i = 1; i < argc; i++)
    {
      wxString Arg = argv[i];
      wxString ArgStart = Arg.BeforeFirst('=');
      wxString ArgEnd = Arg.AfterFirst('=');

      if (ArgStart.IsSameAs(wxT("--port")))
        {
          long lPortnum;
          ArgEnd.ToLong(&lPortnum);
          Portnum = lPortnum;
          if (Portnum <= 0 || Portnum >= 0x10000)
            {
              printf("The --port switch is out of range.  Must be 1-64K.\n");
              goto Help;
            }
        }
      else if (ArgStart.IsSameAs (wxT ("--x")))
	{
    	  long dummy;
    	  ArgEnd.ToLong (&dummy);
    	  ulCorner.x = dummy;
	}
      else if (ArgStart.IsSameAs (wxT ("--y")))
	{
    	  long dummy;
    	  ArgEnd.ToLong (&dummy);
    	  ulCorner.y = dummy;
	}
      else if (ArgStart.IsSameAs(wxT("--images")))
        {
          imageDirectory = ArgEnd;
        }
      else if (ArgStart.IsSameAs(wxT("--nav-bay")))
        {
          navBay = true;
        }
      else if (Arg.IsSameAs (wxT ("--half-size")))
        {
          HalfSize = 1;
        }
      else
        {
          Help: printf("USAGE:\n");
          printf("\tyaDSKYb1 [OPTIONS]\n");
          printf("The available options are:\n");
          printf("--port=Portnumber\n");
          printf(
              "\tBy default, yaDSKYb1 attempts to connect to the yaAGCb1 program using port %d.\n",
              Portnum);
          printf(
              "\tNote that by default, yaAGCb1 listens for new connections on ports 16971-16980.\n");
          printf("--images=Directory\n");
          printf(
              "\tChanges the directory in which yaDSKYb1 finds its image resources from the\n");
          printf("\tdefault (\"images/\").  Must have a trailing '/'.\n");
          printf("--nav-bay\n");
          printf(
              "\tBy default, the main control-panel DSKY is shown.  This selects the nav-bay DSKY.\n");
    	  printf ("--x=X --y=Y\n");
    	  printf (
    	      "\tBy default, the window position is some system default.  This option\n");
    	  printf (
    	      "\tinstead allows explicit selection.  The units are pixel coordinates\n");
    	  printf (
    	      "\tof the upper-left corner, relative to the upper left of the screen.\n");
    	  printf ("--half-size\n");
    	  printf (
    	      "\tUses a half-size version, suitable for smaller graphical displays.\n");
          exit(1);
        }
    }

  wxString envString;
  if (wxGetEnv(wxT("AGC_SCALE"), &envString))
    envString.ToDouble(&scaleDPI);

  wxInitAllImageHandlers();
  frame = new MyFrame(NULL, wxID_ANY, wxEmptyString, imageDirectory, navBay, ulCorner);
  frame->Timer = new TimerClass();
  frame->Timer->Start(PULSE_INTERVAL);
  SetTopWindow(frame);
  // For whatever reason, these things don't size themselves correctly, and all
  // other things being equal, would have to be manually resized. This is a
  // workaround for that.
  /*
  if (navBay)
    frame->SetClientSize (wxSize(SCALED2(346), SCALED2(1151)));
  else
    frame->SetClientSize (wxSize(SCALED2(587), SCALED2(572)));
  */
  frame->SetClientSize( frame->panel->image.GetWidth(), frame->panel->image.GetHeight());
  frame->Show();
  return true;
}
